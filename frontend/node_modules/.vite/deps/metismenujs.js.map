{
  "version": 3,
  "sources": ["../../metismenujs/src/constant.ts", "../../metismenujs/src/metismenujs.ts"],
  "sourcesContent": ["import { IMMOptions } from './interface.js';\n\nexport type MetisMenuEvents =\n  | 'show.metisMenu'\n  | 'shown.metisMenu'\n  | 'hide.metisMenu'\n  | 'hidden.metisMenu';\n\nexport const Default: IMMOptions = {\n  parentTrigger: 'li',\n  subMenu: 'ul',\n  toggle: true,\n  triggerElement: 'a',\n};\n\nexport const ClassName = {\n  ACTIVE: 'mm-active',\n  COLLAPSE: 'mm-collapse',\n  COLLAPSED: 'mm-collapsed',\n  COLLAPSING: 'mm-collapsing',\n  METIS: 'metismenu',\n  SHOW: 'mm-show',\n};\n", "/* eslint-disable max-len */\nimport { ClassName, Default, MetisMenuEvents } from \"./constant.js\";\nimport { IMMOptions } from \"./interface.js\";\nimport {\n  CustomEventListener,\n  EventType,\n  SpecificEventListener,\n} from \"./types.js\";\n\nclass MetisMenu {\n  protected config: IMMOptions;\n\n  protected element: Element;\n\n  protected isTransitioning!: boolean;\n\n  protected disposed: boolean;\n\n  protected triggerArr: Array<Element>;\n\n  boundEventHandler: (evt?: Event) => void;\n\n  /**\n   * Creates an instance of MetisMenu.\n   *\n   * @constructor\n   * @param {Element | string} element\n   * @param {IMMOptions} [options]\n   * @memberof MetisMenu\n   */\n\n  constructor(element: Element | string, options?: IMMOptions) {\n    this.element = MetisMenu.isElement(element) ? element : document.querySelector<HTMLElement>(element)!;\n    this.config = { ...Default, ...options };\n    this.disposed = false;\n    this.triggerArr = [];\n    this.boundEventHandler = this.clickEvent.bind(this);\n    this.init();\n  }\n\n  static attach(el: Element, opt?: IMMOptions) {\n    return new MetisMenu(el, opt);\n  }\n\n  /**\n   * @internal\n   */\n  private init(): void {\n    const { METIS, ACTIVE, COLLAPSE } = ClassName;\n    this.element.classList.add(METIS);\n\n    const uls = [...this.element.querySelectorAll<HTMLElement>(this.config.subMenu!)];\n\n    if (uls.length === 0) {\n      return;\n    }\n\n    uls.forEach((ul: Element) => {\n      ul.classList.add(COLLAPSE!);\n      const li = ul.closest(this.config.parentTrigger!);\n\n      if (li?.classList.contains(ACTIVE!)) {\n        this.show(ul as HTMLElement);\n      } else {\n        this.hide(ul);\n      }\n\n      const a = li?.querySelector<HTMLElement>(this.config.triggerElement!);\n      if (a?.getAttribute(\"aria-disabled\") === \"true\") {\n        return;\n      }\n\n      a?.setAttribute(\"aria-expanded\", \"false\");\n\n      a?.addEventListener(\"click\", this.boundEventHandler);\n      this.triggerArr.push(a!);\n    });\n  }\n  /**\n   * @internal\n   */\n\n  private clickEvent(evt?: Event) {\n    if (!this.disposed) {\n      const target = evt?.currentTarget as Element | null;\n      if (target && target.tagName === \"A\") {\n        evt!.preventDefault();\n      }\n\n      const li = target!.closest(this.config.parentTrigger!);\n      const ul = li?.querySelector(this.config.subMenu!);\n      this.toggle(ul!);\n    }\n  }\n\n  update() {\n    this.disposed = false;\n    this.init();\n  }\n\n  dispose() {\n    this.triggerArr.forEach((arr) => {\n      arr.removeEventListener(\"click\", this.boundEventHandler);\n    });\n    this.disposed = true;\n  }\n\n  on<K extends EventType>(\n    evtType: K,\n    handler: SpecificEventListener<K>,\n    options?: AddEventListenerOptions | boolean,\n  ): MetisMenu;\n\n  on<E extends Event>(\n    evtType: E,\n    handler: CustomEventListener<E>,\n    options?: AddEventListenerOptions | boolean,\n  ): MetisMenu;\n\n  on(\n    evtType: MetisMenuEvents,\n    handler: EventListener,\n    options?: AddEventListenerOptions | boolean,\n  ) {\n    this.element.addEventListener(evtType, handler, options);\n    return this;\n  }\n\n  off<K extends EventType>(\n    evtType: K,\n    handler: SpecificEventListener<K>,\n    options?: AddEventListenerOptions | boolean,\n  ): MetisMenu;\n\n  off<E extends Event>(\n    evtType: E,\n    handler: CustomEventListener<E>,\n    options?: AddEventListenerOptions | boolean,\n  ): MetisMenu;\n\n  off(\n    evtType: MetisMenuEvents,\n    handler: EventListener,\n    options?: AddEventListenerOptions | boolean,\n  ): MetisMenu {\n    this.element.removeEventListener(evtType, handler, options);\n    return this;\n  }\n\n  /**\n   * @internal\n   */\n  emit<T extends object>(\n    evtType: string,\n    evtData: T,\n    shouldBubble = false,\n  ): void {\n    const evt = new CustomEvent<T>(evtType, {\n      bubbles: shouldBubble,\n      detail: evtData,\n    });\n    this.element.dispatchEvent(evt);\n  }\n\n  /**\n   * @internal\n   */\n  toggle(ul: Element) {\n    const li = ul.closest(this.config.parentTrigger!);\n    if (li?.classList.contains(ClassName.ACTIVE)) {\n      this.hide(ul);\n    } else {\n      this.show(ul);\n    }\n  }\n\n  /**\n   * @internal\n   */\n  show(el: Element) {\n    const ul = el as HTMLElement;\n    const { ACTIVE, COLLAPSE, COLLAPSED, COLLAPSING, SHOW } = ClassName;\n\n    if (this.isTransitioning || ul.classList.contains(COLLAPSING!)) {\n      return;\n    }\n    const complete = () => {\n      ul.classList.remove(COLLAPSING!);\n      ul.style.height = \"\";\n      ul.removeEventListener(\"transitionend\", complete);\n      this.setTransitioning(false);\n      this.emit(\"shown.metisMenu\", {\n        shownElement: ul,\n      });\n    };\n\n    const li = ul.closest(this.config.parentTrigger!);\n    li?.classList.add(ACTIVE!);\n\n    const a = li?.querySelector<HTMLElement>(this.config.triggerElement!);\n    a?.setAttribute(\"aria-expanded\", \"true\");\n    a?.classList.remove(COLLAPSED!);\n\n    ul.style.height = \"0px\";\n    ul.classList.remove(COLLAPSE!);\n    ul.classList.remove(SHOW!);\n    ul.classList.add(COLLAPSING!);\n    const eleParentSiblins = [].slice.call(li?.parentNode?.children).filter((\n      c,\n    ) => c !== li);\n    if (this.config.toggle && eleParentSiblins.length > 0) {\n      eleParentSiblins.forEach((sibli: Element) => {\n        const sibUl = sibli.querySelector<HTMLElement>(this.config.subMenu!);\n        if (sibUl) {\n          this.hide(sibUl);\n        }\n      });\n    }\n\n    this.setTransitioning(true);\n\n    ul.classList.add(COLLAPSE!);\n    ul.classList.add(SHOW!);\n    ul.style.height = `${ul.scrollHeight}px`;\n    this.emit(\"show.metisMenu\", {\n      showElement: ul,\n    });\n    ul.addEventListener(\"transitionend\", complete);\n  }\n\n  /**\n   * @internal\n   */\n  hide(el: Element) {\n    const { ACTIVE, COLLAPSE, COLLAPSED, COLLAPSING, SHOW } = ClassName;\n    const ul = el as HTMLElement;\n    if (this.isTransitioning || !ul.classList.contains(SHOW!)) {\n      return;\n    }\n    this.emit(\"hide.metisMenu\", {\n      hideElement: ul,\n    });\n\n    const li = ul.closest(this.config.parentTrigger!);\n    li?.classList.remove(ACTIVE!);\n\n    const complete = () => {\n      ul.classList.remove(COLLAPSING!);\n      ul.classList.add(COLLAPSE!);\n      ul.style.height = \"\";\n      ul.removeEventListener(\"transitionend\", complete);\n      this.setTransitioning(false);\n      this.emit(\"hidden.metisMenu\", {\n        hiddenElement: ul,\n      });\n    };\n\n    ul.style.height = `${ul.getBoundingClientRect().height}px`;\n    ul.style.height = `${ul.offsetHeight}px`;\n\n    ul.classList.add(COLLAPSING!);\n    ul.classList.remove(COLLAPSE!);\n    ul.classList.remove(SHOW!);\n    this.setTransitioning(true);\n\n    ul.addEventListener(\"transitionend\", complete);\n\n    ul.style.height = \"0px\";\n\n    const a = li?.querySelector(this.config.triggerElement!);\n    a?.setAttribute(\"aria-expanded\", \"false\");\n    a?.classList.add(COLLAPSED!);\n  }\n\n  /**\n   * @internal\n   */\n  private setTransitioning(isTransitioning: boolean) {\n    this.isTransitioning = isTransitioning;\n  }\n\n  /**\n   * @internal\n   */\n  static isElement(element: unknown): element is Element {\n    return Boolean((element as Element).classList);\n  }\n}\n\nexport default MetisMenu;\n"],
  "mappings": "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",
  "names": []
}
